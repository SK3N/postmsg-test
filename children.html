<!DOCTYPE html>
<html lang="ja">

  <head>
    <meta charset="UTF-8" />
    <title>Child - postMessageテスト</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 2rem;
      }

      input {
        width: 100%;
        padding: 0.5rem;
        margin-top: 1rem;
      }
    </style>
  </head>

  <body>
    <h1>Child Frame</h1>
    <p>ここは iframe 内です</p>

    <label for="tracking">トラッキングコード：</label>
    <input type="text" id="tracking" name="tracking" placeholder="未入力" />

    <script>
      window.addEventListener("message", (event) => {
        if (event.origin !== "https://sk3n.github.io") return;

        // 受け取ったデータの表示
        console.log("親から受信:", event.data);

        // 例：hidden inputに代入（存在する場合）
        const input = document.getElementById("tracking");
        if (input) {
          input.value = JSON.stringify(event.data);
        }
      });
    </script>
  </body>

</html>